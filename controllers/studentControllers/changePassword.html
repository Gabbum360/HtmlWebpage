<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Page</title>
</head>
<body>
    <form id="chng" class="changePwd" name="changePw" action="http://localhost:5000/api/Authenticate/change-password" method="post" autocomplete="off" enctype="multipart/form-data" target="_blank">
        <legend>Change Password</legend>s
        <p>
            <label for="username">Username</label>
            <input id="un1" name="username" type="text" autofocus autocomplete="on" placeholder="Your Username">
        </p>
        <p>
            <label for="password">Current Password</label>
            <input id="cp1" name="password" type="password" autocomplete="off">
        </p>
        <div>
            <p>
                <label for="password">New Password</label>
                <input id="np1" name="password" type="password" autocomplete="off">
            </p>
        </div>
        <!-- <button type="submit" id="submit" name="submit"> SubmitForm</Form></button> -->
        <input id="see" type="submit" value="Change Password" onclick="changePassword()"/>
                            <!-- incase you do need to add confirm password to the form... -->
        <!-- <p>
            <label for="confirm_password">Confirm Password</label>
            <input id="confirm_password" name="confirm_password" type="password" autocomplete="off">
        </p> -->
    </form>

    <head renat="server">
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
       <script>
                   //for javaScript...
                   
           // $(document).ready(function(){
           //     $("#see").click(function(){
           //         var url ="http://localhost:5000/api/Authenticate/change-password"
           //         var changeDetails = {};
           //            changeDetails.username = $('#un1').val();
           //         changeDetails.currentPassword = $('#cp1').val();
           //         changeDetails.NewPassword = $('#np1').val();
           //      $.ajax({
           //             url: url,
           //             contentType: "application/json; charset=utf-8",
           //             data: JSON.stringify(changeDetails),
           //             type: "Post",
           //             success:function(result){
           //                 alert("user login successful");
           //             },
           //             error:function(msg){
           //                 alert("error in operation");
           //             }
           //         });
           //     });
           // });

           function changePassword(){
               var url = "http://localhost:5000/api/Authenticate/change-password"
               var changeDetails = {};
               changeDetails.username = $('#un1').val();
               changeDetails.currentPassword = $('#cp1').val();
               changeDetails.newPassword = $('#np1').val();
               if(changeDetails){
                   $.ajax({
                       url: url,
                       contentType: "application/json; charset=utf-8",
                       data: JSON.stringify(changeDetails),
                       type: "Post",
                       success:function(result){
                           console.log("password changed successfully. proceed with the new credentials")
                           alert(result);
                           location.href = "HomePage.html"
                       },
                       error:function(msg){
                           alert("error in operation");
                       }
                   });
               }
           }
       </script>
   </head>   
</body>
</html>